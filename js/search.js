function getParameterByName(e,r){r||(r=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),t=n.exec(r);return t?t[2]?decodeURIComponent(t[2].replace(/\+/g," ")):"":null}function calcScore(e,r){for(var n=0,t=0;t<r.length&&null!=r[t];++t)for(var o=0;o<e.length;++o)for(var a=0;a<r[t].length;++a)r[t][a]==e[o]&&n++;return n}function addCountToJson(e,r){for(var n=0;n<r.length;++n)r[n].score=calcScore(e,r[n].content_tokenize)+100*calcScore(e,r[n].title_tokenize)}function quickSort(e){if(e.length<=1)return e;for(var r=Math.floor(e.length/2),n=e.splice(r,1)[0],t=[],o=[],a=0;a<e.length;a++)e[a].score<n.score?t.push(e[a]):o.push(e[a]);return quickSort(t).concat(n,quickSort(o))}window.onload=function(){var e=getParameterByName("query");null==e&&(e=""),$(".st-default-search-input").val(e),$.get("../search.json",function(r){addCountToJson(e,r),r=quickSort(r);for(var n=r.length-1;n>=0;--n)$("#result").append('<a href="'+r[n].url+'" target="_blank"><li>'+r[n].title+" 评分: "+r[n].score+"</li></a>")})};